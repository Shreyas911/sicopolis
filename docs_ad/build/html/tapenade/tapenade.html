<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Open source AD Tool TAPENADE &mdash; SICOPOLIS-AD v2  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/wrap_tables.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Ice sheet model SICOPOLIS" href="../sicopolis/sicopolis.html" />
    <link rel="prev" title="1. Introduction" href="../introduction/introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> SICOPOLIS-AD v2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Open source AD Tool TAPENADE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-tapenade">2.1. Building TAPENADE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites-for-linux-or-mac-os-x">2.1.1. Prerequisites for Linux or Mac OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="#steps-for-linux-or-mac-os-x">2.1.2. Steps for Linux or Mac OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites-for-windows">2.1.3. Prerequisites for Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#steps-for-windows">2.1.4. Steps for Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sicopolis/sicopolis.html">3. Ice sheet model SICOPOLIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adjoints_theory/adjoints_theory.html">4. The Mathematics of Adjoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">5. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running/running.html">6. Running SICOPOLIS-AD v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/utilities.html">7. Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements/acknowledgements.html">8. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/references.html">9. References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SICOPOLIS-AD v2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>Open source AD Tool TAPENADE</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tapenade/tapenade.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="open-source-ad-tool-tapenade">
<span id="tapenade"></span><h1><span class="section-number">2. </span>Open source AD Tool TAPENADE<a class="headerlink" href="#open-source-ad-tool-tapenade" title="Permalink to this headline">¶</a></h1>
<p>TAPENADE is an Automatic Differentiation Engine developed at Inria at Sophia Antipolis by the Tropics then Ecuador teams. TAPENADE takes as input a computer source program,
plus a request for differentiation. TAPENADE builds and returns the differentiated source program, that evaluates the required derivatives.</p>
<section id="building-tapenade">
<span id="build-tapenade"></span><h2><span class="section-number">2.1. </span>Building TAPENADE<a class="headerlink" href="#building-tapenade" title="Permalink to this headline">¶</a></h2>
<p>While the SICOPOLIS source files are prepared to generate adjoint sensitivities, they will not be able to do so without an operable installation of Tapenade. Fortunately the Tapenade installation procedure is straight forward.</p>
<p>We detail the instructions here, but the latest instructions can always be found <a class="reference external" href="http://www-sop.inria.fr/ecuador/tapenade/distrib/README.html">here.</a></p>
<section id="prerequisites-for-linux-or-mac-os-x">
<h3><span class="section-number">2.1.1. </span>Prerequisites for Linux or Mac OS X<a class="headerlink" href="#prerequisites-for-linux-or-mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>Before installing Tapenade, you must check that an up-to-date Java Runtime Environment is installed. Tapenade will not run with older Java Runtime Environment.</p>
</section>
<section id="steps-for-linux-or-mac-os-x">
<h3><span class="section-number">2.1.2. </span>Steps for Linux or Mac OS X<a class="headerlink" href="#steps-for-linux-or-mac-os-x" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Read <a class="reference external" href="https://tapenade.gitlabpages.inria.fr/userdoc/build/html/LICENSE.html">the Tapenade license.</a></p></li>
<li><p>Download <a class="reference external" href="http://www-sop.inria.fr/ecuador/tapenade/distrib/tapenade_3.16.tar">tapenade_3.16.tar</a> into your chosen installation directory <em>install_dir</em>.</p></li>
</ol>
<p><strong>NOTE</strong>: Alternatively, a Tapenade version that works correctly with SICOPOLIS-AD v2 is always available in the <code class="docutils literal notranslate"><span class="pre">test_ad/tapenade_3.16</span></code> directory.</p>
<ol class="arabic simple" start="3">
<li><p>Go to your chosen installation directory <em>install_dir</em>, and extract Tapenade from the tar file :</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">tar</span> <span class="n">xvfz</span> <span class="n">tapenade_3</span><span class="mf">.16</span><span class="o">.</span><span class="n">tar</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>On Linux, depending on your distribution, Tapenade may require you to set the shell variable <code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code> to your java installation directory. It is often <code class="docutils literal notranslate"><span class="pre">JAVA_HOME=/usr/java/default</span></code>. You might also need to modify the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> by adding the bin directory from the Tapenade installation. An example can be found <a class="reference internal" href="#tapenade-bashrc-snippet"><span class="std std-ref">here</span></a>.</p></li>
</ol>
</section>
<section id="prerequisites-for-windows">
<h3><span class="section-number">2.1.3. </span>Prerequisites for Windows<a class="headerlink" href="#prerequisites-for-windows" title="Permalink to this headline">¶</a></h3>
<p><strong>NOTE</strong>: Although Tapenade can be built on Windows, SICOPOLIS requires a Unix-like system (e.g., Linux), as mentioned <a class="reference internal" href="../sicopolis/sicopolis.html#sico-prerequisites"><span class="std std-ref">here</span></a>.</p>
<p>Before installing Tapenade, you must check that an up-to-date Java Runtime Environment is installed. Tapenade will not run with older Java Runtime Environment. The Fortran parser of Tapenade uses <a class="reference external" href="https://www.cygwin.com/">cygwin</a>.</p>
</section>
<section id="steps-for-windows">
<h3><span class="section-number">2.1.4. </span>Steps for Windows<a class="headerlink" href="#steps-for-windows" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Read <a class="reference external" href="https://tapenade.gitlabpages.inria.fr/userdoc/build/html/LICENSE.html">the Tapenade license.</a></p></li>
<li><p>Download <a class="reference external" href="http://www-sop.inria.fr/ecuador/tapenade/distrib/tapenade_3.16.zip">tapenade_3.16.zip</a> into your chosen installation directory <em>install_dir</em>.</p></li>
</ol>
<p><strong>NOTE</strong>: Alternatively, a Tapenade version that works correctly with SICOPOLIS-AD v2 is always available in the <code class="docutils literal notranslate"><span class="pre">test_ad/tapenade_3.16</span></code> directory.</p>
<ol class="arabic simple" start="3">
<li><p>Go to your chosen installation directory <em>install_dir</em>, and extract Tapenade from the zip file.</p></li>
<li><p>Save a copy of the <code class="docutils literal notranslate"><span class="pre">install_dir\tapenade_3.16\bin\tapenade.bat</span></code> file and modify <code class="docutils literal notranslate"><span class="pre">install_dir\tapenade_3.16\bin\tapenade.bat</span></code> according to your installation parameters:</p></li>
</ol>
<p>replace <code class="docutils literal notranslate"><span class="pre">TAPENADE_HOME=..</span></code> by <code class="docutils literal notranslate"><span class="pre">TAPENADE_HOME=&quot;install_dir&quot;\tapenade_3.16</span></code>
replace <code class="docutils literal notranslate"><span class="pre">JAVA_HOME=&quot;C:\Progra~1\Java\jdkXXXX&quot;</span></code> by your current java directory
replace <code class="docutils literal notranslate"><span class="pre">BROWSER=&quot;C:\Program</span> <span class="pre">Files\Internet</span> <span class="pre">Explorer\iexplore.exe&quot;</span></code> by your current browser.</p>
<p id="tapenade-bashrc-snippet"><strong>NOTE</strong>: Every time you wish to use the adjoint capability of SICOPOLIS-AD, you must re-source the environment. We recommend that this be done automatically in your bash or c-shell profile upon login. An example of an addition to a <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file from a Linux server is given below. Luckily, shell variable <code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code> was not required to be explicitly set for this particular Linux distribution, but might be necessary for some other distributions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##set some env variables for SICOPOLIS tapenade</span>

<span class="n">export</span> <span class="n">TAPENADE_HOME</span><span class="o">=</span><span class="s2">&quot;/home/shreyas/tapenade_3.16&quot;</span>
<span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="s2">&quot;$PATH:$TAPENADE_HOME/bin&quot;</span>

<span class="c1">##Modules</span>

<span class="n">module</span> <span class="n">use</span> <span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">modulefiles</span><span class="o">/</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">java</span><span class="o">/</span><span class="n">jdk</span><span class="o">/</span><span class="mf">16.0.1</span> <span class="c1"># Java required by Tapenade</span>
</pre></div>
</div>
<p>You should now have a working copy of Tapenade.</p>
<p>For more information on the tapenade command and its arguments, type :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>tapenade -?
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../introduction/introduction.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../sicopolis/sicopolis.html" class="btn btn-neutral float-right" title="3. Ice sheet model SICOPOLIS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-, SICOPOLIS-AD v2 contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>